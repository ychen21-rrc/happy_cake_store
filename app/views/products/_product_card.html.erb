<div class="card h-100 shadow-sm">
  <% if product.images.attached? %>
    <%= image_tag product.images.first.variant(resize_to_limit: [600, 400]),
                  class: "card-img-top", alt: product.name %>
  <% else %>
    <div class="bg-secondary-subtle ratio ratio-4x3 d-flex align-items-center justify-content-center">
      <span class="text-muted">No Image</span>
    </div>
  <% end %>

  <div class="card-body d-flex flex-column">
    <h5 class="card-title"><%= product.name %></h5>
    <p class="card-text small text-muted flex-grow-1">
      <%= truncate(product.description, length: 80) %>
    </p>

    <div class="d-flex justify-content-between align-items-center">
      <div class="fw-bold">$<%= sprintf("%.2f", product.price) %></div>
      <% if product.is_on_sale %>
        <span class="badge bg-danger">Sale</span>
      <% elsif product.is_new %>
        <span class="badge bg-success">New</span>
      <% end %>
    </div>
  </div>

  <div class="card-footer bg-white border-0 d-flex gap-2">
    <%= link_to "View", product_path(product), class: "btn btn-outline-primary btn-sm w-50" %>
    <%= button_to "Add to Cart", add_cart_path(product.id), method: :post, class: "btn btn-primary btn-sm w-150" %>
  </div>
</div>
