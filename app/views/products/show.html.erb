<div class="container my-4">

  <div class="mb-3">
    <%= link_to "â† Back to Products", products_path, class: "btn btn-outline-secondary btn-sm" %>
  </div>

  <div class="row g-4">
    <!-- Images -->
    <div class="col-md-6">
      <% if @product.images.attached? %>
        <div class="mb-2">
          <%= image_tag @product.images.first.variant(resize_to_limit: [900, 650]),
                        class: "img-fluid rounded shadow-sm", alt: @product.name %>
        </div>

        <% if @product.images.count > 1 %>
          <div class="d-flex flex-wrap gap-2">
            <% @product.images.each do |img| %>
              <%= image_tag img.variant(resize_to_limit: [160, 120]),
                            class: "rounded border", alt: @product.name %>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <div class="bg-light d-flex align-items-center justify-content-center rounded"
             style="height: 320px;">
          <span class="text-muted">No image</span>
        </div>
      <% end %>
    </div>

    <!-- Info -->
    <div class="col-md-6">
      <h1 class="h3"><%= @product.name %></h1>

      <!-- badges -->
      <div class="mb-2">
        <% if @product.is_new %>
          <span class="badge text-bg-success me-1">New</span>
        <% end %>
        <% if @product.is_on_sale %>
          <span class="badge text-bg-danger">Sale</span>
        <% end %>
      </div>

      <p class="lead">
        $<%= number_with_precision(@product.price, precision: 2) %>
      </p>

      <p><%= @product.description %></p>

      <!-- categories -->
      <div class="mb-3">
        <strong>Categories:</strong>
        <% @product.categories.each do |c| %>
          <%= link_to c.name,
                      products_path(category_id: c.id),
                      class: "badge text-bg-light border ms-1" %>
        <% end %>
      </div>

      <%= button_to "Add to Cart",
                    add_cart_path(product_id: @product.id),
                    method: :post,
                    class: "btn btn-primary btn-lg" %>
    </div>
  </div>

</div>
